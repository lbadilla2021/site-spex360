version: '3.8'

services:
  apex360-web:
    build: .
    container_name: apex360-landing
    ports:
      - "9500:80"
    restart: unless-stopped
    environment:
      - TZ=America/Santiago
      - SMTP_HOST=${SMTP_HOST:-}
      - SMTP_PORT=${SMTP_PORT:-587}
      - SMTP_USER=${SMTP_USER:-}
      - SMTP_PASS=${SMTP_PASS:-}
      - SMTP_SECURE=${SMTP_SECURE:-tls}
      - SMTP_FROM=${SMTP_FROM:-contacto@apex360.cl}
    volumes:
      # Carpeta cursos - PERSISTENTE (archivos generados por PHP)
      - ./cursos:/var/www/html/cursos
      # Carpeta blog - PERSISTENTE
      - ./blog:/var/www/html/blog
    networks:
      - nocobase-network
    labels:
      - "traefik.enable=false"
      - "com.apex360.description=Apex 360 Landing Page & OTEC"

networks:
  nocobase-network:
    driver: bridge